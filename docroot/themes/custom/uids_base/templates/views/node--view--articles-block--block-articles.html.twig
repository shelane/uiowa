{%
  set classes = [
  'node',
  'node--type-' ~ node.bundle|clean_class,
  node.isPromoted() ? 'node--promoted',
  node.isSticky() ? 'node--sticky',
  not node.isPublished() ? 'node--unpublished',
  view_mode ? 'node--view-mode-' ~ view_mode|clean_class,
  'media',
  'card',
  'card--enclosed',
]
%}

{% set attributes = attributes.addClass(classes) %}

{% if '1' in  content.field_article_source_link_direct.0 and node.field_article_source_link.0.uri %}
  {% set node_link = node.field_article_source_link.0.uri %}
{% else %}
  {% set node_link = url %}
{% endif %}
{{ attach_library('classy/node') }}

  {% embed '@uids_base/uids/blocks/card.html.twig' with {
    'card_image': content.node_image,
    'card_link_url': node_link,
    'card_link_title': node_link,
  } %}

    {# @todo Add content_attributes.addClass('node__content media-body') #}

    {% block card_img %}
      {% if card_image is not empty %}
        {% if content.node_image %}
          <figure class="card__img">
            {{ content.node_image }}
          </figure>
        {% endif %}
      {% endif %}
    {% endblock %}

    {% block heading %}
      {% if label and not page %}
        {% include '@uids_base/uids/heading.html.twig' with {
          'heading_level' : 'h3',
          'heading_class' : 'card__title',
          'heading' : label,
          'heading_url' : node_link,
          'heading_aria' : 'desc-a-card',
          'heading_attributes': title_attributes,
        } %}

      {% endif %}
    {% endblock %}

    {%  block card_author %}
      {{ content.article_created_date }}{{ content.article_author }}{{ content.field_article_source_org }}{{ content.field_article_source_link }}
    {% endblock %}

    {% block card_content %}
      {{ content|without('node_image', 'links', 'article_created_date', 'article_author', 'field_article_source_org', 'field_article_source_link', 'field_article_source_link_direct') }}
    {% endblock %}

  {% endembed %}
